<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="I love solving Leetcode coding problems for fun. I came across this problem and was intrigued to prove why the sliding window algorithm is correct.   Given an array of heights, find two lines that tog">
<meta property="og:type" content="article">
<meta property="og:title" content="Leetcode: Container With Most Water">
<meta property="og:url" content="http://fhinkel.rocks/2022/02/27/Leetcode-Container-With-Most-Water/index.html">
<meta property="og:site_name" content="Franziska Hinkelmann, Ph.D">
<meta property="og:description" content="I love solving Leetcode coding problems for fun. I came across this problem and was intrigued to prove why the sliding window algorithm is correct.   Given an array of heights, find two lines that tog">
<meta property="og:locale">
<meta property="og:image" content="https://fhinkel.rocks/images/hinkelmannSmall.jpeg">
<meta property="article:published_time" content="2022-02-27T21:01:24.000Z">
<meta property="article:modified_time" content="2022-02-27T21:28:01.830Z">
<meta property="article:author" content="Franziska Hinkelmann">
<meta property="article:tag" content="algorithms">
<meta property="article:tag" content="JavaScript">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://fhinkel.rocks/images/hinkelmannSmall.jpeg">
<meta name="twitter:creator" content="@fhinkel">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Leetcode: Container With Most Water</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- rss -->
    
    
      <link rel="alternate" href="/atom.xml" title="Franziska Hinkelmann, Ph.D" type="application/atom+xml" />
    
<meta name="generator" content="Hexo 5.4.1"></head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/speaking/">Public Speaking</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" href="/2019/11/08/How-I-learned-to-love-the-terminal/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://fhinkel.rocks/2022/02/27/Leetcode-Container-With-Most-Water/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://fhinkel.rocks/2022/02/27/Leetcode-Container-With-Most-Water/&text=Leetcode: Container With Most Water"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://fhinkel.rocks/2022/02/27/Leetcode-Container-With-Most-Water/&title=Leetcode: Container With Most Water"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://fhinkel.rocks/2022/02/27/Leetcode-Container-With-Most-Water/&is_video=false&description=Leetcode: Container With Most Water"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Leetcode: Container With Most Water&body=Check out this article: http://fhinkel.rocks/2022/02/27/Leetcode-Container-With-Most-Water/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://fhinkel.rocks/2022/02/27/Leetcode-Container-With-Most-Water/&title=Leetcode: Container With Most Water"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://fhinkel.rocks/2022/02/27/Leetcode-Container-With-Most-Water/&title=Leetcode: Container With Most Water"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://fhinkel.rocks/2022/02/27/Leetcode-Container-With-Most-Water/&title=Leetcode: Container With Most Water"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://fhinkel.rocks/2022/02/27/Leetcode-Container-With-Most-Water/&title=Leetcode: Container With Most Water"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://fhinkel.rocks/2022/02/27/Leetcode-Container-With-Most-Water/&name=Leetcode: Container With Most Water&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Linear-vs-quadratic-complexity"><span class="toc-number">1.</span> <span class="toc-text">Linear vs quadratic complexity</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Proof-of-Sliding-Window-Algorithm"><span class="toc-number">2.</span> <span class="toc-text">Proof of Sliding Window Algorithm</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Leetcode: Container With Most Water
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Franziska Hinkelmann, Ph.D</span>
      </span>
      
    <div class="postdate">
        <time datetime="2022-02-27T21:01:24.000Z" itemprop="datePublished">2022-02-27</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link-link" href="/tags/JavaScript/" rel="tag">JavaScript</a>, <a class="tag-link-link" href="/tags/algorithms/" rel="tag">algorithms</a>
    </div>


    </div>
  </header>
  <div class="content" itemprop="articleBody">
    <p>I love solving <a target="_blank" rel="noopener" href="https://leetcode.com/problemset/all/">Leetcode</a> coding problems for fun. I came across this problem and was intrigued to prove why the <strong>sliding window algorithm</strong> is correct. </p>
<blockquote>
<p>Given an array of heights, find two lines that together with the x-axis form a container, such that the container contains the most water.</p>
</blockquote>
<img src="/2022/02/27/Leetcode-Container-With-Most-Water/waterCont.png" class="" title="Graph of example container">
<p><em>Representation of [1,8,6,2,5,4,8,3,7]. For this input, the most water a container can contain is 49.</em></p>
<p>You can solve this <strong>brute force</strong> by comparing all possible combinations of left and right lines and keeping track of the most water. The complexity of this solution is quadratic. </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">maxWaterQuadratic</span>(<span class="params">height</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> left = <span class="number">0</span>; </span><br><span class="line">    <span class="keyword">let</span> right = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">let</span> max = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(right &lt; height.<span class="property">length</span>) &#123;</span><br><span class="line">        <span class="keyword">while</span>(left &lt; right) &#123;</span><br><span class="line">            <span class="keyword">let</span> h = <span class="title class_">Math</span>.<span class="title function_">min</span>(height[right], height[left]);</span><br><span class="line">            max = <span class="title class_">Math</span>.<span class="title function_">max</span>(max, h*(right - left));</span><br><span class="line">            left++;</span><br><span class="line">        &#125;</span><br><span class="line">        right++;</span><br><span class="line">        left = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Algorithms with <strong>quadratic complexity</strong> do not work well for very large datasets. For example, given an array with 100 entries as input to a quadratic algorithm takes on the order of <code>100^2 = 10,000</code> instructions. No problem for a modern computer. But as the array size increases, say to 300 million (population size of the US), now we need something on the order of <code>90,000,000,000,000,000</code> instructions. Given that we measure CPUs in GHz (billions of instructions), a quadratic algorithm would not work for this scale. In fact, if you submit this algorithm on <a target="_blank" rel="noopener" href="https://leetcode.com/problems/container-with-most-water/">Leetcode</a>, you get a Time Limit Exceeded error for one of the test cases.</p>
<h2 id="Linear-vs-quadratic-complexity"><a href="#Linear-vs-quadratic-complexity" class="headerlink" title="Linear vs quadratic complexity"></a>Linear vs quadratic complexity</h2><p>Can we solves this problem with <strong>linear complexity</strong>? Is there an algorithm that looks at each array entry just once (or a constant multiple of once) instead of all combinations of pairs of entries?</p>
<img src="/2022/02/27/Leetcode-Container-With-Most-Water/linVsQua.png" class="" title="Graph of linear and quadratic functions"> 
<p><em>Chart of linear vs quadratic complexity</em></p>
<p>In fact, yes, there’s a solution that runs in linear time: Start with the widest container. That means use the first and last element as the left and right boundary. Move the shorter of the left and right boundary one step inwards. Keep track of the most water until the left and right boundaries overlap. This is a <strong>sliding window algorithm</strong> where one pointer starts a the front, the other at the back.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">maxWaterLinear</span>(<span class="params">height</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> max = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> left = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> right = height.<span class="property">length</span>-<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(left &lt; right) &#123;</span><br><span class="line">        <span class="keyword">let</span> area = (right - left) * <span class="title class_">Math</span>.<span class="title function_">min</span>(height[left], height[right]);</span><br><span class="line">        max = <span class="title class_">Math</span>.<span class="title function_">max</span>(area, max);</span><br><span class="line">        height[left] &lt; height[right]) ? left++ : right--;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Why is this algorithm correct though? It passes all the test cases on Leetcode - that doesn’t prove correctness though. How do we know there isn’t some edge case where this algorithm would give us the wrong solution?</p>
<h2 id="Proof-of-Sliding-Window-Algorithm"><a href="#Proof-of-Sliding-Window-Algorithm" class="headerlink" title="Proof of Sliding Window Algorithm"></a>Proof of Sliding Window Algorithm</h2><p>Suppose the real solution of the problem is from index <code>a</code> to <code>b</code> with water height <code>h.</code> Then both <code>a</code> and <code>b</code> are greater or equal to <code>h</code>. Then <strong>for any index to the left or to the right of the optimal container, the height must be less than <code>h</code>.</strong> Otherwise we could extend the optimal container to that index without sacrificing height and have a larger water container.</p>
<p>In our sliding window algorithm, as we move our indexes from the outside in, we will eventually reach <code>a</code> or <code>b</code>. Suppose we reach <code>a</code> first. We just proved that everything outside of the other index <code>b</code>, must be smaller than <code>h</code> and thus smaller than <code>a</code>. Therefore, one pointer in our algorithm will keep moving until it reaches <code>b</code> while the other pointer stays on <code>a.</code> At which point the optimal volume is recorded. If we  reach <code>b</code> first, the argument is exactly the same. Thus, this linear time algorithm will always find the optimal solution. </p>
<p>Happy algorithm coding! </p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/speaking/">Public Speaking</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Linear-vs-quadratic-complexity"><span class="toc-number">1.</span> <span class="toc-text">Linear vs quadratic complexity</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Proof-of-Sliding-Window-Algorithm"><span class="toc-number">2.</span> <span class="toc-text">Proof of Sliding Window Algorithm</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://fhinkel.rocks/2022/02/27/Leetcode-Container-With-Most-Water/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://fhinkel.rocks/2022/02/27/Leetcode-Container-With-Most-Water/&text=Leetcode: Container With Most Water"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://fhinkel.rocks/2022/02/27/Leetcode-Container-With-Most-Water/&title=Leetcode: Container With Most Water"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://fhinkel.rocks/2022/02/27/Leetcode-Container-With-Most-Water/&is_video=false&description=Leetcode: Container With Most Water"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Leetcode: Container With Most Water&body=Check out this article: http://fhinkel.rocks/2022/02/27/Leetcode-Container-With-Most-Water/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://fhinkel.rocks/2022/02/27/Leetcode-Container-With-Most-Water/&title=Leetcode: Container With Most Water"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://fhinkel.rocks/2022/02/27/Leetcode-Container-With-Most-Water/&title=Leetcode: Container With Most Water"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://fhinkel.rocks/2022/02/27/Leetcode-Container-With-Most-Water/&title=Leetcode: Container With Most Water"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://fhinkel.rocks/2022/02/27/Leetcode-Container-With-Most-Water/&title=Leetcode: Container With Most Water"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://fhinkel.rocks/2022/02/27/Leetcode-Container-With-Most-Water/&name=Leetcode: Container With Most Water&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2022 Franziska Hinkelmann
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/speaking/">Public Speaking</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<link rel="stylesheet" href="/lib/meslo-LG/styles.css">

<!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-111379301-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'fhinkel';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


